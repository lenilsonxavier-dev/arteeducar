<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Pequenos Artistas ğŸ¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
/* ========== ESTILOS GLOBAIS ========== */
body {
  margin: 0;
  font-family: "Comic Sans MS", Arial, sans-serif;
  background: #fef6e4;
  text-align: center;
}
h1, h2 { color: #001858; }
.screen { display: none; padding: 10px; }
.active { display: block; }
button {
  padding: 14px; margin: 6px; border-radius: 16px; border: none;
  background: #f582ae; font-size: 16px; color: #001858; cursor: pointer;
  transition: 0.2s;
}
button:hover { background: #ff9cbb; }
.menu button { width: 80%; max-width: 320px; font-size: 18px; }
.canvas {
  border: 4px solid #001858; border-radius: 20px; background: white;
  touch-action: none; max-width: 100%; height: auto;
}
.tools button { background: #8bd3dd; }
.palette {
  display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; margin: 10px 0;
}
.palette button {
  width: 40px; height: 40px; border-radius: 50%; border: 2px solid #001858;
  cursor: pointer;
}
.gallery img {
  width: 120px; margin: 6px; border-radius: 12px; border: 3px solid #001858;
}
.card {
  background: #fff; border-radius: 20px; padding: 14px; margin: 12px; text-align: left;
}
.card h3 { margin-top: 0; color: #172c66; }

/* ========== MURAL ========== */
.mural-container { max-width: 1200px; margin: 0 auto; padding: 10px; }
.mural-toolbar { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin: 20px 0; }
.mural-btn {
  background: #fff; border: 2px solid #8bd3dd; border-radius: 30px; padding: 8px 16px;
  font-size: 0.9rem; color: #001858; display: inline-flex; align-items: center; gap: 5px;
  cursor: pointer; transition: 0.2s;
}
.mural-btn:hover { background: #8bd3dd; }
.mural-btn.active { background: #f582ae; border-color: #f582ae; }
.upload-btn { background: #28a745; border-color: #28a745; color: white; }
.upload-btn:hover { background: #218838; }
.reset-btn { background: #ff6b6b; border-color: #ff6b6b; color: white; }
.reset-btn:hover { background: #ff5252; }
#file-input { display: none; }
.mural-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px;
  padding: 10px;
}
.mural-card {
  background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  border: 2px solid #f582ae; position: relative;
}
.card-image {
  width: 100%; aspect-ratio: 1/1; background: #f3d2c1; display: flex; align-items: center;
  justify-content: center; overflow: hidden;
}
.card-image img { width: 100%; height: 100%; object-fit: cover; }
.card-label {
  padding: 8px; font-size: 0.85rem; background: #fef6e4; color: #001858;
  border-top: 1px solid #f582ae; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.delete-btn {
  position: absolute; top: 5px; right: 5px; background: rgba(255,255,255,0.8);
  border: none; border-radius: 50%; width: 30px; height: 30px;
  font-size: 16px; cursor: pointer; color: #d32f2f;
  display: flex; align-items: center; justify-content: center;
  transition: 0.2s; z-index: 10;
}
.delete-btn:hover { background: white; transform: scale(1.1); }

/* ========== COLORIR ONLINE ========== */
.colorir-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;
  margin: 20px 0; max-width: 600px; margin-left: auto; margin-right: auto;
}
.colorir-thumb {
  border: 3px solid #001858; border-radius: 12px; overflow: hidden; cursor: pointer;
  transition: 0.2s;
}
.colorir-thumb:hover { transform: scale(1.05); border-color: #f582ae; }
.colorir-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
.colorir-tools { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 15px 0; }
.colorir-tools button { background: #8bd3dd; padding: 10px 20px; }
.selected-tool { background: #f582ae !important; color: white; }

/* ========== DESAFIOS DE ARTE ========== */
.desafios-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 10px;
}
.search-box {
  width: 100%;
  padding: 12px;
  margin: 20px 0;
  border: 2px solid #8bd3dd;
  border-radius: 30px;
  font-size: 16px;
  font-family: inherit;
}
.desafios-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
  margin-top: 20px;
}
.desafio-card {
  background: white;
  border-radius: 20px;
  padding: 20px;
  text-align: left;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  border-left: 8px solid #f582ae;
}
.desafio-card h3 {
  color: #001858;
  margin-top: 0;
  font-size: 1.3rem;
}
.desafio-card .numero {
  background: #f582ae;
  color: white;
  display: inline-block;
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.9rem;
  margin-bottom: 10px;
}
.desafio-card .descricao {
  font-size: 1rem;
  margin: 10px 0;
  color: #172c66;
}
.desafio-card .objetivo {
  font-size: 0.95rem;
  color: #555;
  font-style: italic;
  border-top: 1px dashed #8bd3dd;
  padding-top: 10px;
}
.random-btn {
  background: #8bd3dd;
  color: #001858;
  font-size: 1.2rem;
  padding: 12px 25px;
  margin-bottom: 20px;
}
.highlight {
  animation: pulse 1s ease-in-out;
}
@keyframes pulse {
  0% { transform: scale(1); background-color: #fff; }
  50% { transform: scale(1.02); background-color: #f9e6a2; }
  100% { transform: scale(1); background-color: #fff; }
}

/* ========== ESTILOS PARA O PINCEL MÃGICO ========== */
.pincel-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  background: #fff0e0;
  border-radius: 40px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}
.pincel-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 20px;
  background: #f8d5c4;
  padding: 15px 25px;
  border-radius: 60px;
}
.pincel-avatar {
  font-size: 70px;
  animation: tremer 2s infinite ease-in-out;
  filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
}
@keyframes tremer {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(5deg); }
  50% { transform: rotate(-5deg); }
  75% { transform: rotate(3deg); }
  100% { transform: rotate(0deg); }
}
.pincel-fala {
  background: white;
  border-radius: 30px 30px 30px 5px;
  padding: 15px 20px;
  font-size: 1.2rem;
  color: #172c66;
  text-align: left;
  flex: 1;
  border: 2px solid #f582ae;
  position: relative;
}
.pincel-fala:before {
  content: '';
  position: absolute;
  left: -15px;
  top: 20px;
  width: 0;
  height: 0;
  border-top: 15px solid transparent;
  border-bottom: 15px solid transparent;
  border-right: 15px solid #f582ae;
}
.perguntas-sugeridas {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin: 20px 0;
}
.perguntas-sugeridas button {
  background: #8bd3dd;
  font-size: 14px;
  padding: 8px 16px;
  border-radius: 40px;
}
.chat-area {
  background: #ffe9d6;
  border-radius: 30px;
  padding: 15px;
  max-height: 300px;
  overflow-y: auto;
  margin: 20px 0;
  border: 2px solid #f582ae;
  text-align: left;
}
.mensagem {
  margin: 10px 0;
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
.mensagem.pergunta {
  justify-content: flex-end;
}
.mensagem.pergunta span {
  background: #f582ae;
  color: white;
  padding: 10px 15px;
  border-radius: 20px 20px 5px 20px;
  max-width: 70%;
}
.mensagem.resposta span {
  background: white;
  padding: 10px 15px;
  border-radius: 20px 20px 20px 5px;
  border: 2px solid #8bd3dd;
  max-width: 70%;
}
.input-area {
  display: flex;
  gap: 10px;
  margin-top: 15px;
}
.input-area input {
  flex: 1;
  padding: 15px;
  border: 3px solid #8bd3dd;
  border-radius: 50px;
  font-size: 16px;
  outline: none;
}
.input-area button {
  background: #f582ae;
  border-radius: 50px;
  padding: 15px 25px;
  font-size: 18px;
}
.modo-pais {
  background: #f8d5c4;
  border-radius: 30px;
  padding: 15px;
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}
.modo-pais button {
  background: #172c66;
  color: white;
  font-size: 14px;
}
</style>
</head>
<body>

<!-- ========== MENU PRINCIPAL ========== -->
<div id="home" class="screen active menu">
  <h1>ğŸ¨ Pequenos Artistas</h1>
  <button onclick="show('desenho')">ğŸ– Desenho Livre</button>
  <button onclick="show('colorir')">ğŸ¨ Colorir Online</button>
  <button onclick="show('museu')">ğŸ› Museu Virtual</button>
  <button onclick="show('galeria')">ğŸ† Galeria</button>
  <button onclick="show('mural'); carregarMural()">ğŸ–¼ï¸ Mural Virtual</button>
  <button onclick="show('desafiosArte')">ğŸ² Desafios de Arte</button>
  <button onclick="show('pincelIA'); iniciarPincel()">ğŸ–Œ Pincel MÃ¡gico</button>
</div>

<!-- ========== DESENHO LIVRE ========== -->
<div id="desenho" class="screen">
  <h2>ğŸ– Desenho Livre</h2>
  <div class="tools">
    <button onclick="tool='lapis'">âœï¸ LÃ¡pis</button>
    <button onclick="tool='giz'">ğŸ– Giz</button>
    <button onclick="tool='pincel'">ğŸ–Œ Pincel</button>
    <button onclick="tool='spray'">ğŸ¨ Spray</button>
  </div>
  <div class="tools">
    <button onclick="size=4">Fino</button>
    <button onclick="size=8">MÃ©dio</button>
    <button onclick="size=14">Grosso</button>
  </div>
  <div class="palette">
    <button style="background:black" onclick="color='black'"></button>
    <button style="background:red" onclick="color='red'"></button>
    <button style="background:blue" onclick="color='blue'"></button>
    <button style="background:green" onclick="color='green'"></button>
    <button style="background:orange" onclick="color='orange'"></button>
    <button style="background:purple" onclick="color='purple'"></button>
  </div>
  <canvas id="canvas" width="420" height="420" class="canvas"></canvas><br>
  <button onclick="saveDrawing()">ğŸ’¾ Salvar na Galeria</button>
  <button onclick="clearCanvas()">ğŸ§½ Limpar</button>
  <button onclick="show('home')">â¬… Voltar</button>
</div>

<!-- ========== COLORIR ONLINE ========== -->
<div id="colorir" class="screen">
  <h2>ğŸ¨ Colorir Online</h2>
  <p>Escolha um desenho:</p>
  <div class="colorir-grid" id="listaDesenhos"></div>
  
  <canvas id="canvasColorir" width="420" height="420" class="canvas" style="display:none;"></canvas>
  
  <div id="ferramentasColorir" style="display:none;">
    <div class="colorir-tools">
      <button id="btnPincel" class="selected-tool" onclick="setFerramenta('pincel')">ğŸ–Œ Pincel</button>
      <button id="btnBalde" onclick="setFerramenta('balde')">ğŸª£ Balde</button>
      <button onclick="limparCanvasColorir()">ğŸ§½ Limpar</button>
      <button onclick="salvarColorido()">ğŸ’¾ Salvar na Galeria</button>
      <button onclick="voltarEscolha()">â¬… Outro desenho</button>
    </div>
    <div class="palette" id="paletaCores"></div>
  </div>
  <button onclick="show('home')" style="margin-top:20px;">â¬… Voltar ao Menu</button>
</div>

<!-- ========== MUSEU ========== -->
<div id="museu" class="screen">
  <h2>ğŸ› Museu Virtual</h2>
  <div class="card">
    <h3>ğŸ¨ Candido Portinari (1903â€“1962)</h3>
    <p>Portinari pintava lembranÃ§as da sua infÃ¢ncia em Brodowski (SP), mostrando crianÃ§as brincando, soltando pipa e jogando futebol.</p>
    <p><strong>Meninos no BalanÃ§o (1960)</strong></p>
    <img src="https://imgur.com/VZH7ezB.jpg" style="max-width:200px">
    <p><strong>Desafio:</strong> desenhe crianÃ§as brincando no quintal.</p>
  </div>
  <div class="card">
    <h3>ğŸ¨ Ivan Cruz</h3>
    <p>Ivan Cruz ficou conhecido por retratar brincadeiras antigas como pular corda, amarelinha e aviÃ£ozinho.</p>
    <p><strong>Pular Corda</strong></p>
    <img src="https://imgur.com/nTjah0C.jpg" style="max-width:200px">
    <p><strong>Desafio:</strong> desenhe uma brincadeira que vocÃª gosta.</p>
  </div>
  <div class="card">
    <h3>ğŸ¨ Romero Britto</h3>
    <p>Romero Britto usa muitas cores, linhas pretas e formas simples, criando obras alegres e divertidas.</p>
    <p><strong>CrianÃ§as Brincando</strong></p>
    <img src="https://imgur.com/g9RiD8Q.jpg" style="max-width:200px">
    <p><strong>Desafio:</strong> desenhe usando muitas cores.</p>
  </div>
  <div class="card">
    <h3>ğŸ¨ Tarsila do Amaral (1886â€“1973)</h3>
    <p>Tarsila utilizava cores vivas e formas grandes, ajudando a imaginar mundos diferentes no modernismo brasileiro.</p>
    <p><strong>Abaporu</strong></p>
    <img src="https://imgur.com/Ai9sfV0.jpeg" style="max-width:200px">
    <p><strong>Desafio:</strong> crie um personagem bem diferente.</p>
  </div>
  <button onclick="show('home')">â¬… Voltar</button>
</div>

<!-- ========== GALERIA ========== -->
<div id="galeria" class="screen">
  <h2>ğŸ† Galeria dos Artistas</h2>
  <div id="gallery" class="gallery"></div>
  <button onclick="show('home')">â¬… Voltar</button>
</div>

<!-- ========== MURAL VIRTUAL ========== -->
<div id="mural" class="screen">
  <h2>ğŸ–¼ï¸ Mural Virtual</h2>
  <div class="mural-container">
    <div class="mural-toolbar">
      <button class="mural-btn active" data-filter="todos"><i class="fas fa-images"></i> Todos</button>
      <button class="mural-btn" data-filter="uploads"><i class="fas fa-upload"></i> Uploads</button>
      <label for="file-input" class="mural-btn upload-btn"><i class="fas fa-cloud-upload-alt"></i> Enviar Imagem</label>
      <button class="mural-btn reset-btn" onclick="resetMural()"><i class="fas fa-trash-alt"></i> Limpar Mural</button>
      <input type="file" id="file-input" accept="image/*" multiple>
    </div>
    <div class="mural-grid" id="mural-grid"></div>
    <button onclick="show('home')" style="margin-top:20px;">â¬… Voltar</button>
  </div>
</div>

<!-- ========== DESAFIOS DE ARTE ========== -->
<div id="desafiosArte" class="screen">
  <h2>ğŸ² Desafios de Arte</h2>
  <div class="desafios-container">
    <button class="random-btn" onclick="sortearDesafio()">ğŸ² Desafio AleatÃ³rio</button>
    <input type="text" id="buscaDesafio" class="search-box" placeholder="ğŸ” Buscar desafio (ex: mÃºsica, colagem, teatro...)">
    <div id="desafiosGrid" class="desafios-grid"></div>
    <button onclick="show('home')" style="margin-top:20px;">â¬… Voltar</button>
  </div>
</div>

<!-- ========== TELA DO PINCEL MÃGICO ========== -->
<div id="pincelIA" class="screen">
  <h2>ğŸ–Œ Pincel MÃ¡gico</h2>
  <div class="pincel-container">
    <div class="pincel-header">
      <div class="pincel-avatar" id="pincelAvatar">ğŸ–Œï¸</div>
      <div class="pincel-fala" id="pincelFala">
        OlÃ¡! Eu sou o Pincel MÃ¡gico. Pode me perguntar tudo sobre arte, desenho, pintura, danÃ§a, mÃºsica e teatro!
      </div>
    </div>

    <div class="perguntas-sugeridas">
      <button onclick="fazerPergunta('Quem foi Tarsila do Amaral?')">Tarsila</button>
      <button onclick="fazerPergunta('Quem foi Frida Kahlo?')">Frida Kahlo</button>
      <button onclick="fazerPergunta('O que Ã© pontilhismo?')">Pontilhismo</button>
      <button onclick="fazerPergunta('Como desenhar o Stitch?')">Desenhar Stitch</button>
      <button onclick="fazerPergunta('Quem Ã© Yayoi Kusama?')">Yayoi Kusama</button>
      <button onclick="fazerPergunta('O que Ã© perspectiva?')">Perspectiva</button>
    </div>

    <div class="chat-area" id="chatArea">
      <!-- As mensagens aparecerÃ£o aqui -->
    </div>

    <div class="input-area">
      <input type="text" id="perguntaInput" placeholder="Digite sua pergunta...">
      <button onclick="enviarPergunta()">Enviar</button>
    </div>

    <!-- Modo Pais (simples) -->
    <div class="modo-pais">
      <button onclick="limparHistorico()">ğŸ§¹ Limpar histÃ³rico</button>
      <button onclick="bloquearPalavra()">ğŸš« Bloquear palavra</button>
      <span style="color:#172c66; font-size:14px;">(ex: "violÃªncia", "guerra")</span>
    </div>
  </div>
  <button onclick="show('home')" style="margin-top:20px;">â¬… Voltar ao Menu</button>
</div>

<script>
// ========== FUNÃ‡Ã•ES GLOBAIS ==========
function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if (id === "galeria") loadGallery();
  if (id === "desafiosArte") renderDesafios();
  if (id === "pincelIA") {
    const chat = document.getElementById('chatArea');
    if (chat.children.length === 0) {
      adicionarMensagem('resposta', 'OlÃ¡! Eu sou o Pincel MÃ¡gico. Pode me perguntar sobre pintores, obras, danÃ§a, teatro e muito mais!');
    }
  }
}

// ========== DESENHO LIVRE ==========
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let drawing = false, color = "black", size = 6, tool = "lapis";

canvas.onpointerdown = () => drawing = true;
canvas.onpointerup = () => drawing = false;
canvas.onpointermove = e => {
  if (!drawing) return;
  ctx.fillStyle = color;
  let r = size;
  if (tool === "spray") r = Math.random() * size;
  ctx.beginPath();
  ctx.arc(e.offsetX, e.offsetY, r, 0, Math.PI * 2);
  ctx.fill();
};

function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

function saveDrawing() {
  const data = canvas.toDataURL();
  const imgs = JSON.parse(localStorage.getItem("arts") || "[]");
  imgs.push(data);
  localStorage.setItem("arts", JSON.stringify(imgs));
  alert("ğŸ‰ Desenho salvo na Galeria!");
}

function loadGallery() {
  const gallery = document.getElementById("gallery");
  gallery.innerHTML = "";
  const imgs = JSON.parse(localStorage.getItem("arts") || "[]");
  imgs.forEach(i => {
    const img = document.createElement("img");
    img.src = i;
    gallery.appendChild(img);
  });
}

// ========== MURAL VIRTUAL ==========
let savedUploads = JSON.parse(localStorage.getItem("muralUploads") || "[]");
let muralItems = [...savedUploads];

const muralGrid = document.getElementById("mural-grid");
const filterButtons = document.querySelectorAll('.mural-btn[data-filter]');
const fileInput = document.getElementById('file-input');
let currentFilter = 'todos';

function renderMural() {
  let filtered = currentFilter === 'todos' ? muralItems : muralItems.filter(i => i.category === 'upload');
  let html = '';
  filtered.forEach(item => {
    html += `
      <div class="mural-card" data-id="${item.id}">
        <div class="card-image"><img src="${item.imageUrl}" alt="${item.label}"></div>
        <button class="delete-btn" data-id="${item.id}" title="Apagar imagem">
          <i class="fas fa-trash-alt"></i>
        </button>
        <div class="card-label" title="${item.label}">${item.label}</div>
      </div>
    `;
  });
  if (filtered.length === 0) html = '<div style="grid-column:1/-1; padding:30px;">Nenhuma imagem ainda ğŸ–¼ï¸</div>';
  muralGrid.innerHTML = html;
}

function deletarImagem(id) {
  muralItems = muralItems.filter(item => item.id !== id);
  savedUploads = savedUploads.filter(item => item.id !== id);
  localStorage.setItem("muralUploads", JSON.stringify(savedUploads));
  renderMural();
}

muralGrid.addEventListener('click', (e) => {
  const deleteBtn = e.target.closest('.delete-btn');
  if (!deleteBtn) return;
  const card = deleteBtn.closest('.mural-card');
  if (!card) return;
  const id = card.dataset.id;
  if (id) deletarImagem(id);
});

window.resetMural = function() {
  if (confirm('Tem certeza que deseja apagar TODAS as imagens do mural?')) {
    localStorage.removeItem('muralUploads');
    savedUploads = [];
    muralItems = [];
    renderMural();
    setActiveFilterButton('todos');
    currentFilter = 'todos';
  }
};

function setActiveFilterButton(filter) {
  filterButtons.forEach(btn => {
    btn.classList.toggle('active', btn.getAttribute('data-filter') === filter);
  });
}

filterButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    currentFilter = btn.getAttribute('data-filter');
    setActiveFilterButton(currentFilter);
    renderMural();
  });
});

fileInput.addEventListener('change', (e) => {
  Array.from(e.target.files).forEach(file => {
    if (!file.type.startsWith('image/')) return;
    const reader = new FileReader();
    reader.onload = (event) => {
      const uniqueId = Date.now() + '-' + Math.random().toString(36).substr(2, 9);
      const newItem = {
        id: uniqueId,
        label: file.name.length > 20 ? file.name.substr(0,20)+'â€¦' : file.name,
        category: 'upload',
        imageUrl: event.target.result
      };
      muralItems.push(newItem);
      savedUploads.push(newItem);
      localStorage.setItem("muralUploads", JSON.stringify(savedUploads));
      if (currentFilter === 'uploads' || currentFilter === 'todos') renderMural();
    };
    reader.readAsDataURL(file);
  });
  fileInput.value = '';
});

function carregarMural() {
  savedUploads = JSON.parse(localStorage.getItem("muralUploads") || "[]");
  muralItems = [...savedUploads];
  renderMural();
  setActiveFilterButton('todos');
  currentFilter = 'todos';
}

// ========== COLORIR ONLINE ==========
const imagensColorir = [
  "https://i.imgur.com/Q6oaW2D.jpg",
  "https://i.imgur.com/of23VQu.jpg",
  "https://i.imgur.com/6JfY8vS.jpg",
  "https://i.imgur.com/tSKRiM6.jpg",
  "https://i.imgur.com/Tb4CYtP.jpg",
  "https://i.imgur.com/97YWE9f.jpg",
  "https://i.imgur.com/3NTWOok.jpg",
  "https://i.imgur.com/UpY3Zy0.jpg",
  "https://i.imgur.com/XaxtQyn.jpg"
];

const listaDesenhos = document.getElementById("listaDesenhos");
const canvasColorir = document.getElementById("canvasColorir");
const ctxColorir = canvasColorir.getContext("2d");
const ferramentasColorir = document.getElementById("ferramentasColorir");
let ferramentaAtual = "pincel";
let corAtual = "#ff0000";

// Miniaturas
imagensColorir.forEach((url, index) => {
  const div = document.createElement("div");
  div.className = "colorir-thumb";
  div.innerHTML = `<img src="${url}" alt="Desenho ${index+1}" onclick="carregarDesenho('${url}')">`;
  listaDesenhos.appendChild(div);
});

// Paleta de cores
const cores = [
  "#ff0000", "#00ff00", "#0000ff", "#ffff00", "#ff00ff", "#00ffff",
  "#ff8800", "#8800ff", "#0088ff", "#ff0088", "#88ff00", "#000000"
];
const paletaCores = document.getElementById("paletaCores");
cores.forEach(c => {
  const btn = document.createElement("button");
  btn.style.background = c;
  btn.onclick = () => corAtual = c;
  paletaCores.appendChild(btn);
});

function carregarDesenho(url) {
  listaDesenhos.style.display = "none";
  canvasColorir.style.display = "block";
  ferramentasColorir.style.display = "block";
  
  const img = new Image();
  img.crossOrigin = "anonymous";
  img.src = url;
  img.onload = () => {
    ctxColorir.clearRect(0, 0, canvasColorir.width, canvasColorir.height);
    ctxColorir.drawImage(img, 0, 0, canvasColorir.width, canvasColorir.height);
  };
  img.onerror = () => {
    alert("Erro ao carregar a imagem. Verifique a URL ou use imagens locais.");
    voltarEscolha();
  };
}

function setFerramenta(ferr) {
  ferramentaAtual = ferr;
  document.getElementById("btnPincel").classList.toggle("selected-tool", ferr === "pincel");
  document.getElementById("btnBalde").classList.toggle("selected-tool", ferr === "balde");
}

// Flood fill
function floodFill(x, y, fillColor) {
  const imageData = ctxColorir.getImageData(0, 0, canvasColorir.width, canvasColorir.height);
  const data = imageData.data;
  const targetColor = getPixelColor(data, x, y);
  const fillRgb = hexToRgb(fillColor);
  
  if (colorMatch(targetColor, fillRgb)) return;
  
  const pixelsToCheck = [[x, y]];
  while (pixelsToCheck.length) {
    const [cx, cy] = pixelsToCheck.pop();
    const idx = (cy * canvasColorir.width + cx) * 4;
    if (!colorMatch([data[idx], data[idx+1], data[idx+2]], targetColor)) continue;
    
    data[idx] = fillRgb[0];
    data[idx+1] = fillRgb[1];
    data[idx+2] = fillRgb[2];
    data[idx+3] = 255;
    
    if (cx > 0) pixelsToCheck.push([cx-1, cy]);
    if (cx < canvasColorir.width-1) pixelsToCheck.push([cx+1, cy]);
    if (cy > 0) pixelsToCheck.push([cx, cy-1]);
    if (cy < canvasColorir.height-1) pixelsToCheck.push([cx, cy+1]);
  }
  ctxColorir.putImageData(imageData, 0, 0);
}

function getPixelColor(data, x, y) {
  const idx = (y * canvasColorir.width + x) * 4;
  return [data[idx], data[idx+1], data[idx+2]];
}

function colorMatch(rgb1, rgb2) {
  return rgb1[0] === rgb2[0] && rgb1[1] === rgb2[1] && rgb1[2] === rgb2[2];
}

function hexToRgb(hex) {
  const r = parseInt(hex.slice(1,3), 16);
  const g = parseInt(hex.slice(3,5), 16);
  const b = parseInt(hex.slice(5,7), 16);
  return [r, g, b];
}

// Eventos do mouse no canvas de colorir
canvasColorir.onpointerdown = (e) => {
  const rect = canvasColorir.getBoundingClientRect();
  const scaleX = canvasColorir.width / rect.width;
  const scaleY = canvasColorir.height / rect.height;
  const x = Math.floor((e.clientX - rect.left) * scaleX);
  const y = Math.floor((e.clientY - rect.top) * scaleY);
  
  if (ferramentaAtual === "balde") {
    floodFill(x, y, corAtual);
  } else {
    drawing = true;
  }
};

canvasColorir.onpointermove = (e) => {
  if (!drawing || ferramentaAtual !== "pincel") return;
  const rect = canvasColorir.getBoundingClientRect();
  const scaleX = canvasColorir.width / rect.width;
  const scaleY = canvasColorir.height / rect.height;
  const x = Math.floor((e.clientX - rect.left) * scaleX);
  const y = Math.floor((e.clientY - rect.top) * scaleY);
  
  ctxColorir.fillStyle = corAtual;
  ctxColorir.beginPath();
  ctxColorir.arc(x, y, size, 0, Math.PI * 2);
  ctxColorir.fill();
};

canvasColorir.onpointerup = () => { drawing = false; };
canvasColorir.onpointerleave = () => { drawing = false; };

function limparCanvasColorir() {
  ctxColorir.clearRect(0, 0, canvasColorir.width, canvasColorir.height);
}

function salvarColorido() {
  const data = canvasColorir.toDataURL();
  const imgs = JSON.parse(localStorage.getItem("arts") || "[]");
  imgs.push(data);
  localStorage.setItem("arts", JSON.stringify(imgs));
  alert("ğŸ‰ Desenho colorido salvo na Galeria!");
}

function voltarEscolha() {
  listaDesenhos.style.display = "grid";
  canvasColorir.style.display = "none";
  ferramentasColorir.style.display = "none";
  limparCanvasColorir();
}

// ========== DESAFIOS DE ARTE ==========
// ATENÃ‡ÃƒO: Substitua este array pelos 150 itens completos do seu cÃ³digo original
const desafios = [
  { numero: 1, titulo: "Desenho Ã s Cegas", descricao: "Cada aluno fecha os olhos e tenta desenhar um objeto simples (copo, casa, flor). Depois comparam os resultados, rindo e discutindo sobre formas e proporÃ§Ãµes.", objetivo: "estimular criatividade e percepÃ§Ã£o sem pressÃ£o estÃ©tica." },
  { numero: 2, titulo: "Cores Musicais", descricao: "O professor coloca mÃºsicas diferentes (alegre, triste, calma, agitada). Os alunos devem pintar ou desenhar o que 'sentirem' com cada mÃºsica.", objetivo: "trabalhar expressÃ£o artÃ­stica e relaÃ§Ã£o entre som e cor." },
  // ... COLOQUE AQUI TODOS OS OUTROS DESAFIOS
  { numero: 150, titulo: "ExposiÃ§Ã£o de Arte da Turma", descricao: "Organizar uma exposiÃ§Ã£o com os melhores trabalhos do ano, cada aluno explica sua obra.", objetivo: "valorizar o processo criativo e desenvolver autoconfianÃ§a." }
];

function renderDesafios() {
  const busca = document.getElementById('buscaDesafio').value.toLowerCase();
  const grid = document.getElementById('desafiosGrid');
  const filtrados = desafios.filter(d => 
    d.titulo.toLowerCase().includes(busca) || 
    d.descricao.toLowerCase().includes(busca) || 
    d.objetivo.toLowerCase().includes(busca)
  );
  
  let html = '';
  filtrados.forEach(d => {
    html += `
      <div class="desafio-card" id="desafio-${d.numero}">
        <span class="numero">#${d.numero}</span>
        <h3>${d.titulo}</h3>
        <div class="descricao">${d.descricao}</div>
        <div class="objetivo"><strong>Objetivo:</strong> ${d.objetivo}</div>
      </div>
    `;
  });
  if (filtrados.length === 0) {
    html = '<p style="text-align:center; padding:40px;">Nenhum desafio encontrado ğŸ˜•</p>';
  }
  grid.innerHTML = html;
}

document.getElementById('buscaDesafio')?.addEventListener('input', renderDesafios);

window.sortearDesafio = function() {
  const randomIndex = Math.floor(Math.random() * desafios.length);
  const sorteado = desafios[randomIndex];
  const elemento = document.getElementById(`desafio-${sorteado.numero}`);
  if (elemento) {
    elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
    elemento.classList.add('highlight');
    setTimeout(() => elemento.classList.remove('highlight'), 1500);
  } else {
    document.getElementById('buscaDesafio').value = '';
    renderDesafios();
    setTimeout(() => {
      const el = document.getElementById(`desafio-${sorteado.numero}`);
      if (el) {
        el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        el.classList.add('highlight');
        setTimeout(() => el.classList.remove('highlight'), 1500);
      }
    }, 100);
  }
};

// ========== PINCEL MÃGICO - BANCO DE CONHECIMENTO EXPANDIDO ==========
const conhecimento = [
  // ===== CONCEITOS GERAIS =====
  { palavras: ['arte', 'o que Ã© arte'], resposta: 'Arte Ã© uma forma de expressÃ£o! Pode ser um desenho, pintura, danÃ§a, mÃºsicaâ€¦ Ã‰ o jeito das pessoas mostrarem sentimentos e ideias. ğŸ¨' },
  { palavras: ['desenho', 'o que Ã© desenho'], resposta: 'Desenho Ã© quando usamos lÃ¡pis, caneta ou giz para criar linhas e formas. DÃ¡ para desenhar tudo o que a gente imagina! ğŸ–ï¸' },
  { palavras: ['pintura', 'tÃ©cnicas de pintura'], resposta: 'Na pintura, existem vÃ¡rias tÃ©cnicas: aquarela (tinta com Ã¡gua, suave), guache (tinta grossa), tinta a Ã³leo (demora a secar) e atÃ© pintura com os dedos! ğŸ¨' },

  // ===== ARTISTAS BRASILEIROS =====
  { palavras: ['tarsila', 'tarsila do amaral', 'abaporu'], resposta: 'Tarsila do Amaral foi uma pintora brasileira que adorava cores vibrantes. O quadro mais famoso dela Ã© o Abaporu, que tem um homem bem diferente! Ela ajudou a criar a arte moderna no Brasil. ğŸŒˆ' },
  { palavras: ['portinari', 'candido portinari'], resposta: 'Candido Portinari pintava a vida do povo brasileiro: crianÃ§as brincando, trabalhadores e festas. Suas obras tÃªm cores terrosas e mostram o Brasil de verdade. ğŸ‡§ğŸ‡·' },
  { palavras: ['aleijadinho', 'antonio francisco lisboa'], resposta: 'Aleijadinho foi um grande escultor brasileiro. Ele fez lindas estÃ¡tuas de pedra-sabÃ£o, como os 12 profetas em Congonhas. Mesmo doente, continuou criando arte! ğŸ™' },
  { palavras: ['djanira'], resposta: 'Djanira era uma pintora brasileira que gostava de mostrar a cultura do povo: festas, mercados e religiÃµes. Suas telas sÃ£o cheias de cores e alegria! ğŸ‰' },
  { palavras: ['rubem valentim'], resposta: 'Rubem Valentim criava obras com formas geomÃ©tricas e cores fortes, inspiradas nos sÃ­mbolos das religiÃµes afro-brasileiras. Parecem mandalas coloridas! ğŸ”´ğŸŸ¡ğŸ”µ' },
  { palavras: ['mestre didi'], resposta: 'Mestre Didi era artista e sacerdote do candomblÃ©. Ele fazia esculturas com palha, contas e bÃºzios que lembram os orixÃ¡s. Uma arte cheia de espiritualidade! âœ¨' },
  { palavras: ['rosana paulino'], resposta: 'Rosana Paulino Ã© uma artista que usa desenhos, gravuras e costuras para falar sobre a histÃ³ria das mulheres negras no Brasil. Suas obras fazem a gente pensar! ğŸ§µ' },
  { palavras: ['di cavalcanti'], resposta: 'Di Cavalcanti pintava mulheres, festas e o povo brasileiro com traÃ§os fortes e cores vibrantes. Ele foi um dos grandes nomes do modernismo! ğŸ’ƒ' },
  { palavras: ['carybÃ©'], resposta: 'CarybÃ© era um artista argentino que viveu no Brasil e adorava pintar a cultura baiana, com seus orixÃ¡s, capoeira e carnaval. ğŸ¥' },
  { palavras: ['lygia clark'], resposta: 'Lygia Clark criava obras que a gente podia tocar e mexer! Ela inventou os "Bichos", esculturas que se movem. Uma artista muito divertida! ğŸ' },
  { palavras: ['helio oiticica', 'hÃ©lio oiticica'], resposta: 'HÃ©lio Oiticica inventou os "ParangolÃ©s", capas coloridas para as pessoas vestirem e danÃ§arem. Ele queria que a arte fosse vivida! ğŸ§£' },

  // ===== NOVOS ARTISTAS (SOLICITADOS) =====
  { palavras: ['takashi murakami', 'murakami'], resposta: 'Takashi Murakami Ã© um artista japonÃªs que mistura arte erudita e cultura pop, criando personagens coloridos como flores sorridentes. Seu estilo Ã© chamado de "superflat"! ğŸŒ¸' },
  { palavras: ['frida kahlo'], resposta: 'Frida Kahlo pintava muitos autorretratos mostrando sua vida e dores. Ela usava cores fortes, roupas mexicanas e elementos da natureza. Uma artista muito forte! ğŸŒº' },
  { palavras: ['romero britto'], resposta: 'Romero Britto Ã© um artista brasileiro famoso por suas obras coloridas, com formas geomÃ©tricas e traÃ§os alegres. Ele espalha felicidade pelo mundo com sua arte pop! ğŸŒŸ' },
  { palavras: ['yayoi kusama'], resposta: 'Yayoi Kusama Ã© uma artista japonesa que adora bolinhas! Ela cria salas cheias de pontos coloridos e esculturas gigantes de abÃ³boras. Uma arte hipnotizante! ğŸ”´' },
  { palavras: ['keith haring'], resposta: 'Keith Haring desenhava bonequinhos danÃ§antes com contornos pretos e cores vibrantes. Sua arte estava nas ruas de Nova York e falava sobre amor e amizade! ğŸ’ƒ' },
  { palavras: ['wassily kandinsky'], resposta: 'Kandinsky foi um artista russo que pintava mÃºsica! Ele usava formas e cores para expressar sons e sentimentos. Suas obras sÃ£o abstratas e cheias de movimento! ğŸ”µ' },
  { palavras: ['ivan cruz'], resposta: 'Ivan Cruz Ã© um pintor brasileiro que retrata brincadeiras de crianÃ§a: pular corda, amarelinha, pipa. Suas telas sÃ£o coloridas e cheias de nostalgia! ğŸ§¸' },
  { palavras: ['salvador dali'], resposta: 'Salvador DalÃ­ era um artista surrealista espanhol. Pintava sonhos estranhos, com relÃ³gios derretidos e elefantes de pernas finas. Ele tinha um bigode incrÃ­vel! â°' },
  { palavras: ['picasso'], resposta: 'Pablo Picasso inventou o cubismo, mostrando as pessoas de vÃ¡rios Ã¢ngulos ao mesmo tempo. Ele pintou "Guernica" contra a guerra. Um gÃªnio da arte! ğŸ¨' },
  { palavras: ['paul klee'], resposta: 'Paul Klee criava obras delicadas e poÃ©ticas, com formas que parecem desenhos de crianÃ§a. Ele dizia que "a arte nÃ£o reproduz o visÃ­vel, torna visÃ­vel". ğŸ–¼ï¸' },
  { palavras: ['edgar degas'], resposta: 'Degas pintava bailarinas e cavalos em movimento. Ele adorava capturar momentos de danÃ§a e treino. Muitas de suas obras sÃ£o em pastel! ğŸ©°' },

  // ===== OUTROS ARTISTAS BRASILEIROS (COMPLEMENTOS) =====
  { palavras: ['anita malfatti'], resposta: 'Anita Malfatti foi uma pintora que trouxe o modernismo para o Brasil. Sua obra "O Homem Amarelo" causou polÃªmica, mas abriu caminho para a arte nova! ğŸ‡§ğŸ‡·' },
  { palavras: ['hÃ©lio oiticica', 'helio oiticica'], resposta: 'HÃ©lio Oiticica criou os ParangolÃ©s, capas coloridas para vestir e danÃ§ar. Ele queria que o pÃºblico participasse da arte. Muito divertido! ğŸ§£' },
  { palavras: ['lygia clark'], resposta: 'Lygia Clark inventou os "Bichos", esculturas que a gente pode dobrar e mexer. Uma arte que brinca com a gente! ğŸ' },
  { palavras: ['di cavalcanti'], resposta: 'Di Cavalcanti pintou as mulatas, o samba e as festas brasileiras. Suas obras tÃªm curvas suaves e cores vibrantes. Um mestre do modernismo! ğŸ’ƒ' },
  { palavras: ['alfredo volpi'], resposta: 'Volpi ficou famoso pintando bandeirinhas de festa junina e fachadas de casas. Suas cores sÃ£o suaves e suas formas, geomÃ©tricas. Uma arte que lembra o Brasil! ğŸ' },
  { palavras: ['adriana varejÃ£o'], resposta: 'Adriana VarejÃ£o cria obras que parecem paredes rasgadas, mostrando camadas de azulejos e histÃ³ria. Sua arte fala sobre o Brasil colonial. ğŸº' },
  { palavras: ['vik muniz'], resposta: 'Vik Muniz faz arte com materiais inusitados: lixo, chocolate, geleia! Ele fotografa suas criaÃ§Ãµes e recria obras famosas de um jeito bem criativo. â™»ï¸' },
  { palavras: ['beatriz milhazes'], resposta: 'Beatriz Milhazes pinta telas coloridas e cheias de formas que parecem flores e rendas. Sua arte Ã© alegre e cheia de energia! ğŸŒ¸' },

  // ===== ARTISTAS NORDESTINOS =====
  { palavras: ['mestre vitalino'], resposta: 'Mestre Vitalino foi um artesÃ£o pernambucano que esculpia bonecos de barro retratando o sertÃ£o: vaqueiros, casamentos, festas. Uma arte cheia de tradiÃ§Ã£o! ğŸº' },
  { palavras: ['aldemir martins'], resposta: 'Aldemir Martins pintou gatos, galos e a paisagem do CearÃ¡. Seus traÃ§os sÃ£o simples e fortes, e suas cores, vibrantes. Um artista muito querido! ğŸ“' },
  { palavras: ['eduardo lima'], resposta: 'Eduardo Lima Ã© um artista baiano autodidata que retrata o sertÃ£o com cores vibrantes. Suas obras jÃ¡ foram expostas no Louvre, em Paris! ğŸŒµ' },
  { palavras: ['gilvan samico'], resposta: 'Samico criava xilogravuras com temas do folclore nordestino. Suas imagens parecem histÃ³rias em quadrinhos da literatura de cordel! ğŸ“–' },
  { palavras: ['carybÃ©'], resposta: 'CarybÃ© nasceu na Argentina, mas amava a Bahia! Pintou orixÃ¡s, capoeira e o carnaval de Salvador com traÃ§os fortes e muitas cores. ğŸ¥' },
  { palavras: ['yacunÃ£ tuxÃ¡'], resposta: 'YacunÃ£ TuxÃ¡ Ã© uma artista indÃ­gena da Bahia que usa linguagens contemporÃ¢neas para falar sobre sua cultura e seus ancestrais. Muito importante! ğŸŒ¿' },
  { palavras: ['solon ribeiro'], resposta: 'Solon Ribeiro Ã© um artista cearense que trabalha com fotografia e luz. Suas obras brincam com sombras e reflexos, criando imagens mÃ¡gicas. ğŸ“¸' },
  { palavras: ['cacimba', 'marcos felipe'], resposta: 'Cacimba Ã© um artista paraibano que pinta cenas simples do interior: casinhas, ruas de terra, gente da roÃ§a. Sua arte Ã© cheia de afeto e simplicidade. ğŸ¡' },

  // ===== TÃ‰CNICAS ARTÃSTICAS =====
  { palavras: ['desenho', 'tÃ©cnica de desenho'], resposta: 'Desenho Ã© a base de tudo! Use lÃ¡pis, carvÃ£o ou caneta para criar linhas e formas. Treine observando a natureza e solte a imaginaÃ§Ã£o! âœï¸' },
  { palavras: ['sombra', 'como fazer sombra'], resposta: 'Sombra dÃ¡ volume aos desenhos! Observe onde a luz bate e escureÃ§a o lado oposto. Use lÃ¡pis mais macio ou esfume com o dedo. ğŸŒ‘' },
  { palavras: ['luz', 'efeitos de luz'], resposta: 'A luz revela as cores e formas. Em um desenho, as Ã¡reas mais claras sÃ£o onde a luz incide diretamente. Brilho e reflexos dÃ£o realismo! â˜€ï¸' },
  { palavras: ['cores', 'teoria das cores'], resposta: 'Cores quentes (vermelho, amarelo, laranja) transmitem energia; cores frias (azul, verde, roxo) trazem calma. Cores complementares sÃ£o opostas no cÃ­rculo cromÃ¡tico! ğŸ¨' },
  { palavras: ['perspectiva'], resposta: 'Perspectiva dÃ¡ profundidade ao desenho. Coisas longe parecem menores e com menos detalhes. Use linhas que convergem para um ponto no horizonte. ğŸ›¤ï¸' },
  { palavras: ['pontilhismo'], resposta: 'Pontilhismo Ã© pintar com pontinhos! Ao invÃ©s de misturar as tintas, coloque pontos de cores puras lado a lado. O olho faz a mistura! Georges Seurat era mestre nisso. ğŸ”´ğŸŸ¡ğŸ”µ' },

  // ===== DESENHOS DE PERSONAGENS (HITS ATUAIS E CLÃSSICOS) =====
  { palavras: ['desenhar stitch', 'stitch'], resposta: 'Stitch Ã© um alienÃ­gena azul fofinho! Desenhe uma cabeÃ§a redonda, orelhas enormes, olhos grandes, nariz preto e braÃ§os compridos. NÃ£o esqueÃ§a das garrinhas! ğŸ‘½' },
  { palavras: ['desenhar patrulha canina', 'patrulha canina'], resposta: 'A Patrulha Canina tem vÃ¡rios filhotes! Para desenhar o Chase, faÃ§a um cachorro com uniforme azul e distintivo. O Marshall Ã© vermelho com manchinhas. Use cores vivas! ğŸ¾' },
  { palavras: ['desenhar barbie'], resposta: 'Barbie tem rosto delicado, cabelo loiro comprido e roupas fashion. Desenhe o corpo alongado e um sorriso. Pode colocar um vestido rosa! ğŸ‘—' },
  { palavras: ['desenhar bluey'], resposta: 'Bluey Ã© uma cachorrinha azul da sÃ©rie australiana. Desenhe uma cabeÃ§a redonda, orelhas caÃ­das, olhos grandes e patinhas. Ela adora brincar! ğŸ¶' },
  { palavras: ['desenhar masha e o urso'], resposta: 'Masha Ã© uma menininha sapeca com vestido rosa e lenÃ§o na cabeÃ§a. O urso Ã© grande e marrom. Desenhe Masha com bochechas rosadas e olhos vivos! ğŸ»' },
  { palavras: ['desenhar mundo bita'], resposta: 'O Mundo Bita tem personagens coloridos! O Bita Ã© um astronauta de capacete, o Dan Ã© um peixinho, a Lina Ã© uma menina e o Tito Ã© um passarinho. Divirta-se! ğŸš€' },
  { palavras: ['desenhar baby shark'], resposta: 'Baby Shark: um tubarÃ£ozinho com corpo cinza, olhos grandes, barbatanas e dentes afiados. FaÃ§a ele cantando "doo doo doo"! ğŸ¦ˆ' },
  { palavras: ['desenhar galinha pintadinha'], resposta: 'Galinha Pintadinha Ã© uma galinha branca com pintinhas vermelhas. Desenhe um corpo oval, crista vermelha e olhos grandes. Ela estÃ¡ sempre danÃ§ando! ğŸ”' },
  { palavras: ['desenhar pocoyo'], resposta: 'Pocoyo Ã© um menino de macacÃ£o azul e gorro. Seu corpo Ã© simples, com cabeÃ§a redonda. Junto dele, a Pato (amarela) e o Elly (elefante rosa). ğŸ§¢' },
  { palavras: ['desenhar pequerruchos'], resposta: 'Os Pequerruchos sÃ£o quatro irmÃ£ozinhos coloridos: Amarelo, Vermelho, Azul e Verde. Desenhe cada um com formato de gotinha e rostos alegres! ğŸ‘¶' },
  { palavras: ['desenhar monica toy'], resposta: 'Monica Toy Ã© a versÃ£o fofa da MÃ´nica. Desenhe uma cabeÃ§a grande, olhos redondos, cabelo curto e o coelhinho SansÃ£o na mÃ£o. Use vermelho no vestido! ğŸ°' },
  { palavras: ['desenhar bob esponja'], resposta: 'Bob Esponja Ã© uma esponja quadrada amarela, com calÃ§a marrom, gravata vermelha e olhos grandes. Seu amigo Patrick Ã© uma estrela-do-rosa. ğŸ§½' },
  { palavras: ['desenhar mickey mouse'], resposta: 'Mickey tem orelhas redondas e grandes, calÃ§Ã£o vermelho e sapatos amarelos. Desenhe um cÃ­rculo para a cabeÃ§a, duas orelhas e o rostinho simpÃ¡tico. ğŸ­' },
  { palavras: ['desenhar backyardigans'], resposta: 'Os Backyardigans sÃ£o amigos animais: Pablo (pinguim), Tyrone (alce), Uniqua (insetinho rosa), Tasha (hipopÃ³tamo) e Austin (canguru). Cores vibrantes! ğŸµ' },
  { palavras: ['desenhar naruto'], resposta: 'Naruto tem cabelo loiro espetado, faixa na testa, roupa laranja e listras no rosto. Desenhe ele fazendo o sinal de "clone das sombras"! ğŸ¥' },
  { palavras: ['desenhar pokemon', 'pikachu'], resposta: 'Pikachu Ã© amarelo, com orelhas pontudas, olhos redondos e bochechas vermelhas. Desenhe seu rabo em forma de raio. Pika pika! âš¡' },
  { palavras: ['desenhar ben 10'], resposta: 'Ben 10 tem um relÃ³gio mÃ¡gico (Omnitrix) no pulso. Desenhe um menino de camiseta preta e verde, com cabelo curto e expressÃ£o aventureira. âŒš' },
  { palavras: ['desenhar one piece', 'luffy'], resposta: 'Luffy usa chapÃ©u de palha, colete vermelho e tem cicatriz no rosto. Seu corpo Ã© elÃ¡stico! Desenhe um sorriso enorme e braÃ§os esticados. â˜ ï¸' },
  { palavras: ['desenhar o show da luna'], resposta: 'Luna Ã© uma menina curiosa com cabelo cacheado e Ã³culos de sol. Ela adora ciÃªncia! Desenhe com jaleco branco e uma lupa. ğŸ”¬' },
  { palavras: ['desenhar superhands'], resposta: 'SuperHands Ã© um programa de arte. Desenhe mÃ£os coloridas e criativas, com olhinhos e utensÃ­lios de desenho. Solte a imaginaÃ§Ã£o! ğŸ‘' },
  { palavras: ['desenhar elinor'], resposta: 'Elinor Ã© uma coelhinha curiosa. Desenhe orelhas compridas, laÃ§o rosa, vestido azul e uma lupa. Ela adora descobrir coisas novas! ğŸ”' },

  // ===== OBRAS FAMOSAS =====
  { palavras: ['mona lisa'], resposta: 'A Mona Lisa foi pintada por Leonardo da Vinci. Ela tem um sorriso enigmÃ¡tico e Ã© a pintura mais famosa do mundo! EstÃ¡ no museu do Louvre, em Paris. ğŸ˜Š' },
  { palavras: ['abaporu'], resposta: 'Abaporu Ã© a obra mais famosa de Tarsila do Amaral. Ã‰ uma figura com cabeÃ§a pequena, pÃ© gigante e um cacto. O nome significa "homem que come" em tupi. ğŸŒµ' },
  { palavras: ['noite estrelada', 'noite estrelada'], resposta: 'Noite Estrelada Ã© de Van Gogh. Mostra um cÃ©u cheio de estrelas brilhantes e redemoinhos. Van Gogh pintou de dentro de um hospital! âœ¨' },
  { palavras: ['o grito'], resposta: 'O Grito, de Edvard Munch, mostra uma figura com o rosto assustado, em uma ponte. A pintura expressa desespero e solidÃ£o. ğŸ˜¨' },
  { palavras: ['a Ãºltima ceia', 'ultima ceia'], resposta: 'A Ãšltima Ceia, de Leonardo da Vinci, mostra Jesus e seus 12 apÃ³stolos na Ãºltima refeiÃ§Ã£o antes da crucificaÃ§Ã£o. Tem muitos detalhes! ğŸ' },
  { palavras: ['guernica'], resposta: 'Guernica, de Picasso, mostra os horrores da guerra. Ã‰ enorme e em preto e branco, cheia de figuras sofrendo. Uma obra muito forte! ğŸ’£' },
  { palavras: ['os girassÃ³is'], resposta: 'Os GirassÃ³is Ã© uma sÃ©rie de pinturas de Van Gogh com flores amarelas em vasos. Ele adorava a cor amarela! ğŸŒ»' },
  { palavras: ['a criaÃ§Ã£o de adÃ£o'], resposta: 'A CriaÃ§Ã£o de AdÃ£o, de Michelangelo, estÃ¡ no teto da Capela Sistina. Mostra Deus estendendo a mÃ£o para dar vida a AdÃ£o. Quase se tocam! ğŸ‘†' },
  { palavras: ['o pensador'], resposta: 'O Pensador Ã© uma escultura de Rodin. Mostra um homem nu, sentado, pensando profundamente. O que serÃ¡ que ele estÃ¡ pensando? ğŸ¤”' },
  { palavras: ['a persitÃªncia da memÃ³ria'], resposta: 'A PersistÃªncia da MemÃ³ria, de DalÃ­, tem relÃ³gios moles derretendo. Parece um sonho ou uma paisagem estranha. â³' },

  // ===== MOVIMENTOS ARTÃSTICOS =====
  { palavras: ['renascimento', 'renascenÃ§a'], resposta: 'O Renascimento foi um perÃ­odo em que os artistas redescobriram a arte grega e romana. Eles queriam pintar de forma realista. Leonardo e Michelangelo sÃ£o dessa Ã©poca! ğŸ›ï¸' },
  { palavras: ['barroco', 'barroco brasileiro'], resposta: 'O Barroco Ã© um estilo de arte cheio de detalhes e emoÃ§Ã£o. No Brasil, ele apareceu nas igrejas com muito ouro e nas esculturas do Aleijadinho. Parece que as imagens vÃ£o se mexer! â›ª' },
  { palavras: ['modernismo', 'semana de 22'], resposta: 'O Modernismo foi um movimento que comeÃ§ou em 1922, com a Semana de Arte Moderna. Os artistas queriam criar uma arte brasileira, diferente da europeia. Tarsila e Portinari sÃ£o exemplos! ğŸš€' },
  { palavras: ['cubismo'], resposta: 'O Cubismo foi inventado por Picasso e Braque. Eles pintavam objetos e pessoas de todos os lados ao mesmo tempo, como se fossem quebra-cabeÃ§as! ğŸ§©' },
  { palavras: ['impressionismo'], resposta: 'Os impressionistas pintavam ao ar livre, captando a luz e as cores do momento. Monet Ã© o mais famoso. As pinceladas sÃ£o rÃ¡pidas e soltas! ğŸŒ' },
  { palavras: ['expressionismo'], resposta: 'O Expressionismo mostra sentimentos fortes, como medo e angÃºstia, atravÃ©s de cores fortes e formas distorcidas. Van Gogh e Munch sÃ£o expressionistas! ğŸ˜±' },
  { palavras: ['surrealismo'], resposta: 'O Surrealismo Ã© a arte dos sonhos! Artistas como DalÃ­ pintavam cenas estranhas e irreais, misturando fantasia e realidade. ğŸŒ™' },
  { palavras: ['pop art'], resposta: 'A Pop Art usava imagens da cultura popular, como quadrinhos e latas de sopa. Andy Warhol pintou a famosa lata de sopa Campbell! ğŸ¥«' },

  // ===== DANÃ‡A =====
  { palavras: ['samba'], resposta: 'O samba Ã© uma danÃ§a e mÃºsica brasileira, cheia de alegria e ritmo. Tem pandeiro, tamborim e muito rebolado! Ã‰ a cara do carnaval! ğŸ­' },
  { palavras: ['frevo'], resposta: 'O frevo Ã© uma danÃ§a de Pernambuco, muito rÃ¡pida e colorida. Os danÃ§arinos usam sombrinhas e fazem passos incrÃ­veis! â˜‚ï¸ğŸ¶' },
  { palavras: ['maracatu'], resposta: 'Maracatu Ã© uma manifestaÃ§Ã£o cultural com mÃºsica, danÃ§a e desfile. Tem origem africana e indÃ­gena. As roupas sÃ£o lindas e coloridas! ğŸ¥' },
  { palavras: ['balÃ©', 'ballet'], resposta: 'O balÃ© Ã© uma danÃ§a clÃ¡ssica, cheia de graÃ§a e movimentos suaves. As bailarinas usam sapatilhas e tutus. Uma das mais famosas Ã© a Ana Botafogo! ğŸ©°' },
  { palavras: ['isadora duncan'], resposta: 'Isadora Duncan foi uma danÃ§arina que revolucionou a danÃ§a. Ela danÃ§ava descalÃ§a, com roupas leves, inspirada na natureza e na arte grega! ğŸŒ¿' },
  { palavras: ['vaslav nijinsky'], resposta: 'Nijinsky foi um grande bailarino russo. Ele danÃ§ava com tanta emoÃ§Ã£o que parecia flutuar no ar! Foi uma lenda do balÃ©. â­' },
  { palavras: ['merce cunningham'], resposta: 'Merce Cunningham foi um coreÃ³grafo americano que criou danÃ§as bem diferentes, Ã s vezes ao som de silÃªncio! Ele queria que o movimento fosse livre. ğŸ•º' },
  { palavras: ['pina bausch'], resposta: 'Pina Bausch criava danÃ§as-teatro, onde os bailarinos tambÃ©m atuavam. Suas coreografias mostravam sentimentos e histÃ³rias do dia a dia. ğŸ˜¢' },

  // ===== TEATRO E ATORES =====
  { palavras: ['teatro', 'o que Ã© teatro'], resposta: 'Teatro Ã© uma arte onde artistas representam histÃ³rias no palco, com personagens, figurinos e cenÃ¡rios. Ã‰ como uma histÃ³ria que ganha vida! ğŸ­' },
  { palavras: ['shakespeare', 'william shakespeare'], resposta: 'Shakespeare foi um famoso escritor de peÃ§as de teatro. Escreveu Romeu e Julieta, Hamlet e muitas outras. Suas histÃ³rias sÃ£o contadas atÃ© hoje! ğŸ“œ' },
  { palavras: ['chaplin', 'charles chaplin'], resposta: 'Charles Chaplin foi um ator e diretor de cinema mudo. Ele criou o personagem Carlitos, um vagabundo engraÃ§ado e sensÃ­vel. ğŸ©' },
  { palavras: ['moliÃ¨re'], resposta: 'MoliÃ¨re foi um grande ator e escritor francÃªs de comÃ©dias. Ele fazia piadas com a sociedade e a burguesia da Ã©poca. Muito engraÃ§ado! ğŸ˜‚' },
  { palavras: ['daniel day-lewis'], resposta: 'Daniel Day-Lewis Ã© um ator que se transforma completamente nos personagens. Ele ganhou vÃ¡rios Oscars! Um dos melhores atores do cinema. ğŸ¬' },
  { palavras: ['fernanda montenegro'], resposta: 'Fernanda Montenegro Ã© uma grande atriz brasileira de teatro, TV e cinema. Ela foi indicada ao Oscar pelo filme Central do Brasil. ğŸ‘' },

  // ===== MÃšSICA =====
  { palavras: ['mÃºsica', 'histÃ³ria da mÃºsica'], resposta: 'A mÃºsica existe desde os tempos antigos! Os primeiros instrumentos eram feitos de ossos e pedras. Hoje temos muitos estilos: pop, rock, samba, MPB... ğŸµ' },
  { palavras: ['villa-lobos', 'heitor villa-lobos'], resposta: 'Villa-Lobos foi um grande compositor brasileiro. Ele misturava mÃºsica clÃ¡ssica com sons do folclore brasileiro. Criou as Bachianas Brasileiras! ğŸ»' },
  { palavras: ['tom jobim', 'antonio carlos jobim'], resposta: 'Tom Jobim foi um dos criadores da bossa nova. Sua mÃºsica "Garota de Ipanema" Ã© uma das mais tocadas no mundo todo! ğŸ¹' },
  { palavras: ['carmen miranda'], resposta: 'Carmen Miranda foi uma cantora e atriz brasileira famosa no mundo todo. Ela usava chapÃ©us enormes com frutas e balanÃ§ava muito os quadris! ğŸŒ' },

  // ===== ARTE AFRICANA E AFRO-BRASILEIRA =====
  { palavras: ['arte africana', 'afro-brasileira'], resposta: 'A arte africana e afro-brasileira Ã© cheia de cores, sÃ­mbolos e significados. MÃ¡scaras, esculturas e pinturas que contam histÃ³rias dos orixÃ¡s e da cultura negra. Muito linda! ğŸŒ' },
  { palavras: ['orixÃ¡s', 'candomblÃ©'], resposta: 'Os orixÃ¡s sÃ£o divindades africanas trazidas ao Brasil. Cada um tem suas cores e sÃ­mbolos. Artistas como Mestre Didi e Rubem Valentim os representam em suas obras. ğŸ•¯ï¸' },

  // ===== RESPOSTA PADRÃƒO (fallback) =====
  { palavras: [], resposta: 'Que pergunta legal! Ainda nÃ£o sei responder essa, mas vocÃª pode perguntar sobre pintores (Tarsila, Portinari, Van Gogh), obras (Abaporu, Monalisa), danÃ§a (samba, balÃ©) ou teatro. Vamos tentar de novo? ğŸ˜Š' }
];

// Lista de palavras bloqueadas
let palavrasBloqueadas = ['violÃªncia', 'guerra', 'tiro', 'sangue', 'briga', 'morte'];
let historicoPerguntas = [];

function removerAcentos(str) {
  return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
}

function adicionarMensagem(tipo, texto) {
  const chat = document.getElementById('chatArea');
  const div = document.createElement('div');
  div.className = `mensagem ${tipo}`;
  div.innerHTML = `<span>${texto}</span>`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function fazerPergunta(pergunta) {
  document.getElementById('perguntaInput').value = pergunta;
  enviarPergunta();
}

function enviarPergunta() {
  const input = document.getElementById('perguntaInput');
  const pergunta = input.value.trim();
  if (pergunta === '') return;

  const perguntaLower = pergunta.toLowerCase();
  for (let palavra of palavrasBloqueadas) {
    if (perguntaLower.includes(palavra)) {
      adicionarMensagem('pergunta', pergunta);
      adicionarMensagem('resposta', 'Ops! Essa pergunta nÃ£o posso responder. Que tal perguntar sobre arte, desenho ou mÃºsica? ğŸ–Œï¸');
      input.value = '';
      historicoPerguntas.push({ pergunta, resposta: 'bloqueada', data: new Date() });
      return;
    }
  }

  adicionarMensagem('pergunta', pergunta);
  historicoPerguntas.push({ pergunta, data: new Date() });

  const pincelAvatar = document.getElementById('pincelAvatar');
  const pincelFala = document.getElementById('pincelFala');
  pincelAvatar.style.animation = 'tremer 0.5s infinite';
  pincelFala.innerText = 'Deixa eu pensar... ğŸ¤”';

  setTimeout(() => {
    const perguntaNormalizada = removerAcentos(perguntaLower);
    let respostaEncontrada = null;
    
    for (let item of conhecimento) {
      for (let palavra of item.palavras) {
        const palavraNormalizada = removerAcentos(palavra.toLowerCase());
        if (perguntaNormalizada.includes(palavraNormalizada)) {
          respostaEncontrada = item.resposta;
          break;
        }
      }
      if (respostaEncontrada) break;
    }

    if (!respostaEncontrada) {
      respostaEncontrada = conhecimento.find(item => item.palavras.length === 0).resposta;
    }

    pincelAvatar.style.animation = '';
    pincelFala.innerText = respostaEncontrada;
    adicionarMensagem('resposta', respostaEncontrada);
    historicoPerguntas[historicoPerguntas.length-1].resposta = respostaEncontrada;
  }, 800);

  input.value = '';
}

function limparHistorico() {
  document.getElementById('chatArea').innerHTML = '';
  adicionarMensagem('resposta', 'HistÃ³rico limpo! Pode fazer novas perguntas.');
  historicoPerguntas = [];
}

function bloquearPalavra() {
  const palavra = prompt('Digite a palavra que deseja bloquear (ex: violÃªncia, guerra):');
  if (palavra && palavra.trim() !== '') {
    palavrasBloqueadas.push(palavra.trim().toLowerCase());
    alert(`Palavra "${palavra}" bloqueada!`);
  }
}

function iniciarPincel() {
  const chat = document.getElementById('chatArea');
  if (chat.children.length === 0) {
    adicionarMensagem('resposta', 'OlÃ¡! Eu sou o Pincel MÃ¡gico. Pode me perguntar sobre pintores, obras, danÃ§a, teatro e muito mais!');
  }
}

document.getElementById('perguntaInput')?.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') enviarPergunta();
});
</script>
</body>
</html>
